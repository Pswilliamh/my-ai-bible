<script>
  async function search() {
    const query = document.getElementById('search').value;
    const resultsDiv = document.getElementById('results');
    resultsDiv.innerHTML = '<p>Loading...</p>';

    try {
      // Using getBible API (adjust endpoint as needed)
      const response = await fetch(`https://getbible.net/v2/kjv/verses.json?q=${query}`);
      const data = await response.json();

      resultsDiv.innerHTML = '';
      if (data.verses && data.verses.length > 0) {
        data.verses.forEach(verse => {
          const words = verse.text.split(' ').map(word => {
            // Mock Strong's for now; real API might include it
            const strongs = word === 'loved' ? 'G25' : 'N/A';
            return `<span onclick="showDetails('${word}', '${strongs}')" style="cursor: pointer;">${word}</span>`;
          }).join(' ');
          resultsDiv.innerHTML += `
            <div class="card mb-2">
              <div class="card-body">
                <h5 class="card-title">${verse.book_name} ${verse.chapter}:${verse.verse}</h5>
                <p class="card-text">${words}</p>
              </div>
            </div>
          `;
        });
      } else {
        resultsDiv.innerHTML = '<p>No results found. Try another search!</p>';
      }
    } catch (error) {
      resultsDiv.innerHTML = '<p>Sorry, something went wrong. Please try again later.</p>';
      console.error('Error:', error);
    }
  }

  function showDetails(word, strongs) {
    // Mock etymology for now
    const definition = strongs === 'G25' ? 'To love (agapa≈ç)' : 'Not available';
    const etymology = strongs === 'G25' ? 'Present active, 1st person singular' : 'N/A';
    alert(`Word: ${word}\nStrong's Number: ${strongs}\nDefinition: ${definition}\nEtymology: ${etymology}`);
  }

  document.getElementById('search').addEventListener('keypress', function(event) {
    if (event.key === 'Enter') {
      search();
    }
  });
</script>
